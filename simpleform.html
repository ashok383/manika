<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CV Maker</title>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f4f4;
    padding: 20px;
}
.container {
    display: flex;
    gap: 20px;
}
.form-box, .preview-box {
    background: #fff;
    padding: 20px;
    width: 50%;
    border-radius: 8px;
}
input, button {
    width: 100%;
    padding: 8px;
    margin: 6px 0;
}
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}
table, th, td {
    border: 1px solid #000;
}
th, td {
    padding: 6px;
    text-align: center;
}
.preview-box img {
    width: 120px;
    height: 120px;
    object-fit: cover;
    border: 1px solid #000;
}
button {
    background: #3399cc;
    color: #fff;
    border: none;
    cursor: pointer;
}
button:hover {
    background: #287aa3;
}
</style>
</head>
<body>

<h2>CV Maker</h2>

<div class="container">

<!-- FORM -->
<div class="form-box">
    <h3>Enter Details</h3>

    <input type="text" id="name" placeholder="Full Name">
    <input type="date" id="dob">
    <input type="file" id="photo" accept="image/*">

    <h4>Academic Qualifications</h4>
    <input type="text" id="exam" placeholder="Exam">
    <input type="text" id="board" placeholder="Board/University">
    <input type="text" id="year" placeholder="Year">
    <input type="text" id="marks" placeholder="Marks">
    <button onclick="addRow()">Add Qualification</button>

    <br><br>
    <button onclick="payNow()">Pay & Download CV</button>
</div>

<!-- PREVIEW -->
<div class="preview-box" id="cv">
    <h2 id="pname">Your Name</h2>
    <p><b>Date of Birth:</b> <span id="pdob"></span></p>
    <img id="pphoto">

    <h3>Academic Qualifications</h3>
    <table>
        <thead>
            <tr>
                <th>Exam</th>
                <th>Board</th>
                <th>Year</th>
                <th>Marks</th>
            </tr>
        </thead>
        <tbody id="ptable"></tbody>
    </table>
</div>

</div>

<script>
let tableData = [];

document.getElementById("name").oninput = () => {
    document.getElementById("pname").innerText = name.value;
};

document.getElementById("dob").oninput = () => {
    document.getElementById("pdob").innerText = dob.value;
};

document.getElementById("photo").onchange = (e) => {
    let reader = new FileReader();
    reader.onload = () => {
        document.getElementById("pphoto").src = reader.result;
    };
    reader.readAsDataURL(e.target.files[0]);
};

function addRow() {
    let row = {
        exam: exam.value,
        board: board.value,
        year: year.value,
        marks: marks.value
    };
    tableData.push(row);
    renderTable();
    exam.value = board.value = year.value = marks.value = "";
}

function renderTable() {
    let html = "";
    tableData.forEach(r => {
        html += `<tr>
            <td>${r.exam}</td>
            <td>${r.board}</td>
            <td>${r.year}</td>
            <td>${r.marks}</td>
        </tr>`;
    });
    document.getElementById("ptable").innerHTML = html;
}

function payNow() {
    var options = {
        "key": "ashokj73459834",
        "amount": 5000, // â‚¹50
        "currency": "INR",
        "name": "CV Maker",
        "description": "Download CV",
        "handler": function (response) {
            downloadCV();
        },
        "theme": {
            "color": "#3399cc"
        }
    };
    var rzp = new Razorpay(options);
    rzp.open();
}

function downloadCV() {
    let cvContent = document.getElementById("cv").outerHTML;
    let blob = new Blob([cvContent], { type: "text/html" });
    let link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "My_CV.html";
    link.click();
}
</script>

</body>
</html>
