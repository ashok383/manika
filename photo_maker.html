<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>(MANIK-A-RNIKA) Photo Tool</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;margin:0;padding:0;}
body{
  min-height:100vh;
  font-family:'Segoe UI',sans-serif;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:20px;
  background: linear-gradient(120deg,#ff9a9e,#fad0c4,#a18cd1,#fbc2eb);
  background-size:400% 400%;
  animation: gradientBG 15s ease infinite;
}

@keyframes gradientBG{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}

.app{
  position:relative;
  background:rgba(255,255,255,0.22);
  backdrop-filter:blur(18px);
  border-radius:32px;
  padding:35px;
  width:min(1200px,95%);
  box-shadow:
    0 30px 70px rgba(0,0,0,0.45),
    inset 0 0 0 1px rgba(255,255,255,0.25);
  color:#fff;
}

.app::before{
  content:"";
  position:absolute;
  inset:-4px;
  border-radius:36px;
  background:linear-gradient(
    135deg,
    #ff9a9e,
    #fad0c4,
    #a18cd1,
    #fbc2eb
  );
  background-size:400% 400%;
  animation: gradientBG 12s ease infinite;
  z-index:-2;
}

.app::after{
  content:"";
  position:absolute;
  inset:10px;
  border-radius:26px;
  border:1.5px solid rgba(255,255,255,0.35);
  pointer-events:none;
}

.app span.corner{
  position:absolute;
  width:30px;
  height:30px;
  border:2px solid rgba(255,255,255,0.45);
}
.app span.tl{top:18px;left:18px;border-right:none;border-bottom:none;border-radius:12px 0 0 0;}
.app span.tr{top:18px;right:18px;border-left:none;border-bottom:none;border-radius:0 12px 0 0;}
.app span.bl{bottom:18px;left:18px;border-right:none;border-top:none;border-radius:0 0 0 12px;}
.app span.br{bottom:18px;right:18px;border-left:none;border-top:none;border-radius:0 0 12px 0;}

header{
  text-align:center;
  margin-bottom:25px;
}
header h2{
  font-size:2.2em;
  background:linear-gradient(90deg,#ff9a9e,#fad0c4,#a18cd1,#fbc2eb);
  background-clip:text;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:gradientText 8s ease infinite;
}
@keyframes gradientText{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}

.controls{
  display:flex;
  flex-wrap:wrap;
  gap:25px;
  justify-content:center;
  margin-bottom:25px;
}
.controls div{
  display:flex;
  flex-direction:column;
  min-width:220px;
}
input[type="file"]{
  padding:12px;
  border-radius:12px;
  border:none;
}

/* BUTTON STYLES WITH FIXED RED/GREEN GRADIENTS */
button{
  padding:18px 40px;
  border:none;
  border-radius:35px;
  cursor:pointer;
  font-weight:bold;
  color:#fff;
  font-size:18px;
  box-shadow:0 10px 30px rgba(0,0,0,0.35);
  transition:transform 0.3s,box-shadow 0.3s;
}

/* Red button - Process Photo */
button.process{
  background: linear-gradient(90deg, #ff4d4d, #ff1a1a);
}
button.process:hover{
  transform: translateY(-4px) scale(1.05);
  box-shadow:0 15px 40px rgba(0,0,0,0.4);
}

/* Green button - Preview & Download */
button.preview{
  background: linear-gradient(90deg, #4dff88, #1aff55);
}
button.preview:hover{
  transform: translateY(-4px) scale(1.05);
  box-shadow:0 15px 40px rgba(0,0,0,0.4);
}

.work-area{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
  gap:30px;
}
canvas{
  display:block;
  margin:15px auto;
  border-radius:15px;
  box-shadow:0 15px 40px rgba(0,0,0,0.35);
  max-width:100%;
}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  display:none;
  justify-content:center;
  align-items:flex-start;
  padding:15px;
  overflow-y:auto;
  z-index:1000;
}
.modal-content{
  background:rgba(255,255,255,0.15);
  backdrop-filter:blur(20px);
  border-radius:20px;
  padding:20px;
  max-width:95%;
  width:700px;
  color:#fff;
}
.close{
  float:right;
  font-size:24px;
  cursor:pointer;
}

footer{
  text-align:center;
  margin-top:25px;
  font-size:14px;
  opacity:0.85;
}
@media(max-width:800px){
  .controls{flex-direction:column;}
}
</style>
</head>

<body>

<div class="app">
  <span class="corner tl"></span>
  <span class="corner tr"></span>
  <span class="corner bl"></span>
  <span class="corner br"></span>

<header>
  <h2>(MANIK-A-RNIKA) Photo Tool</h2>
</header>

<div class="controls">
  <div>
    <label>Upload Photo</label>
    <input type="file" id="upload" accept="image/*">
  </div>
  <div>
    <button class="process" onclick="processImage()">Process Photo</button>
  </div>
</div>

<div class="work-area">
  <div>
    <h3>35 × 45 mm Photo</h3>
    <canvas id="photoCanvas"></canvas>
  </div>
  <div>
    <h3>6 × 4 Sheet (8 Copies)</h3>
    <button class="preview" onclick="openModal()">Preview & Download</button>
  </div>
</div>

<footer>Web-App & Desktop Ready | Premium Decorative Design</footer>
</div>

<div class="modal" id="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">✖</span>
    <h3>6 × 4 Inch Photo Sheet</h3>
    <canvas id="sheetCanvas"></canvas>
    <br>
    <button class="preview" onclick="downloadSheet()">Download Sheet</button>
  </div>
</div>

<script>
const upload=document.getElementById("upload");
const photoCanvas=document.getElementById("photoCanvas");
const sheetCanvas=document.getElementById("sheetCanvas");
const modal=document.getElementById("modal");

const ctx=photoCanvas.getContext("2d");
const sheetCtx=sheetCanvas.getContext("2d");
let img=new Image();

upload.onchange=e=>{
  const r=new FileReader();
  r.onload=()=>img.src=r.result;
  r.readAsDataURL(e.target.files[0]);
};

const mmToPx=mm=>Math.round(mm*11.81);

function processImage(){
  const w=mmToPx(35);
  const h=mmToPx(45);
  photoCanvas.width=w;
  photoCanvas.height=h;
  ctx.clearRect(0,0,w,h);
  drawRoundedImage(img,15);
  drawBlackBorder();
  createPhotoSheet();
}

function drawRoundedImage(image,r){
  ctx.save();
  ctx.beginPath();
  ctx.moveTo(r,0);
  ctx.lineTo(photoCanvas.width-r,0);
  ctx.quadraticCurveTo(photoCanvas.width,0,photoCanvas.width,r);
  ctx.lineTo(photoCanvas.width,photoCanvas.height-r);
  ctx.quadraticCurveTo(photoCanvas.width,photoCanvas.height,photoCanvas.width-r,photoCanvas.height);
  ctx.lineTo(r,photoCanvas.height);
  ctx.quadraticCurveTo(0,photoCanvas.height,0,photoCanvas.height-r);
  ctx.lineTo(0,r);
  ctx.quadraticCurveTo(0,0,r,0);
  ctx.closePath();
  ctx.clip();
  ctx.drawImage(image,0,0,photoCanvas.width,photoCanvas.height);
  ctx.restore();
}

function drawBlackBorder(){
  ctx.lineWidth=16;
  ctx.strokeStyle="#000";
  ctx.strokeRect(8,8,photoCanvas.width-16,photoCanvas.height-16);
}

function createPhotoSheet(){
  sheetCanvas.width=1800;
  sheetCanvas.height=1200;
  sheetCtx.fillStyle="#fff";
  sheetCtx.fillRect(0,0,1800,1200);
  let x=40,y=40;
  for(let r=0;r<2;r++){
    for(let c=0;c<4;c++){
      sheetCtx.drawImage(photoCanvas,x,y);
      x+=photoCanvas.width+20;
    }
    x=40;
    y+=photoCanvas.height+20;
  }
}

function openModal(){modal.style.display="flex";}
function closeModal(){modal.style.display="none";}

function downloadSheet(){
  const a=document.createElement("a");
  a.download="photosheet_6x4.png";
  a.href=sheetCanvas.toDataURL("image/png");
  a.click();
}
</script>

</body>
</html>
