<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PDF to JPG Converter</title>

<!-- PDF.js CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

<style>
body{
  font-family: Arial, sans-serif;
  background:#111;
  color:#fff;
  text-align:center;
  padding:30px;
}
input{
  margin:15px 0;
}
canvas{
  display:none;
}
img{
  width:90%;
  max-width:600px;
  margin:15px 0;
  border-radius:8px;
  display:block;
}
button, a.download-btn{
  padding:10px 20px;
  font-size:16px;
  cursor:pointer;
  margin:10px;
  border:none;
  border-radius:5px;
}
button{
  background:#0ff;
}
a.download-btn{
  background:#222;
  color:#0ff;
  text-decoration:none;
  display:inline-block;
}
.page{
  margin-bottom:30px;
}
</style>
</head>

<body>

<h2>ðŸ“„ PDF â†’ JPG Converter</h2>

<input type="file" id="pdfInput" accept="application/pdf">
<br>
<button onclick="convertPDF()">Convert</button>

<div id="output"></div>

<canvas id="pdfCanvas"></canvas>

<script>
pdfjsLib.GlobalWorkerOptions.workerSrc =
  "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";

let generatedImages = [];

async function convertPDF() {
  const file = document.getElementById("pdfInput").files[0];
  if (!file) {
    alert("Please select a PDF file");
    return;
  }

  generatedImages = [];
  const output = document.getElementById("output");
  output.innerHTML = "";

  const reader = new FileReader();
  reader.readAsArrayBuffer(file);

  reader.onload = async function () {
    const pdf = await pdfjsLib.getDocument({ data: reader.result }).promise;

    for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
      const page = await pdf.getPage(pageNum);
      const viewport = page.getViewport({ scale: 2 });

      const canvas = document.getElementById("pdfCanvas");
      const ctx = canvas.getContext("2d");
      canvas.width = viewport.width;
      canvas.height = viewport.height;

      await page.render({ canvasContext: ctx, viewport }).promise;

      const dataURL = canvas.toDataURL("image/jpeg", 1.0);
      generatedImages.push({ pageNum, dataURL });

      const pageDiv = document.createElement("div");
      pageDiv.className = "page";

      const img = document.createElement("img");
      img.src = dataURL;

      const downloadLink = document.createElement("a");
      downloadLink.href = dataURL;
      downloadLink.download = `page_${pageNum}.jpg`;
      downloadLink.className = "download-btn";
      downloadLink.innerText = `â¬‡ Download Page ${pageNum}`;

      pageDiv.appendChild(img);
      pageDiv.appendChild(downloadLink);
      output.appendChild(pageDiv);
    }

    const downloadAllBtn = document.createElement("button");
    downloadAllBtn.innerText = "â¬‡ Download All Pages";
    downloadAllBtn.onclick = downloadAllImages;
    output.appendChild(downloadAllBtn);
  };
}

function downloadAllImages() {
  generatedImages.forEach(img => {
    const a = document.createElement("a");
    a.href = img.dataURL;
    a.download = `page_${img.pageNum}.jpg`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  });
}
</script>

</body>
</html>
