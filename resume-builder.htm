<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resume Builder</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}

body{
    margin:0;
    font-family:'Poppins',sans-serif;
    background:linear-gradient(135deg,#ff9a9e,#fad0c4,#a1c4fd,#c2e9fb);
    background-size:400% 400%;
    animation:bgMove 10s ease infinite;
}

@keyframes bgMove{
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}

.container{
    max-width:900px;
    margin:30px auto;
    padding:25px;
    background:#fff;
    border-radius:20px;
    box-shadow:0 15px 35px rgba(0,0,0,.25);
}

h1{
    text-align:center;
    background:linear-gradient(90deg,#ff4081,#7c4dff,#00e5ff);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}

label{font-weight:600;margin-top:12px;display:block}

input,textarea{
    width:100%;
    padding:12px;
    border-radius:10px;
    border:1px solid #ccc;
    margin-bottom:10px;
}

button{
    padding:12px 22px;
    border:none;
    border-radius:30px;
    cursor:pointer;
    font-weight:600;
    margin-right:10px;
}

.preview-btn{background:#ff4081;color:#fff}
.add-btn{background:#00c853;color:#fff}
.remove-btn{background:#f44336;color:#fff}
.download-btn{background:#00c853;color:#fff}
</style>
</head>

<body>

<div class="container">
<h4>üå∏üåø(RESUME_BUILDER) üåøüå∏</h4>

<label>Upload Photo</label>
<input type="file" id="photo" accept="image/*">

<label>Full Name</label>
<input id="fullName" value="remomanik">

<label>Father Name</label>
<input id="fatherName" value="Father_Name">

<label>Mother Name</label>
<input id="motherName" value="Mother_Name">

<label>Date of Birth</label>
<input id="dob" type="date">

<label>Email</label>
<input id="email" value="yourname@email.com">

<label>Phone</label>
<input id="phone" value="+91 9XXXXXXXXX">

<label>Address</label>
<textarea id="address">Hyderabad, Telangana, India</textarea>

<label>Career Objective</label>
<textarea id="objective" rows="6">
A highly motivated, disciplined, and detail-oriented individual seeking a challenging position in a growth-oriented organization where I can effectively apply my technical knowledge, problem-solving abilities, and creative thinking skills.
</textarea>

<label>Professional Summary</label>
<textarea id="summary">
Enthusiastic and dedicated professional with a strong foundation in modern technologies and effective communication skills.
</textarea>

<label>Academic Details</label>
<div id="academicsContainer">
    <div class="academicRow" style="display:flex;gap:5px;">
        <input value="B.Tech in Computer Science">
        <input value="University">
        <input value="2026 - 2027">
        <input value="  8.5 CGPA  ">
        <button class="remove-btn" onclick="removeAcademic(this)">‚úñ</button>
    </div>
</div>

<button class="add-btn" onclick="addAcademic()">‚ûï Add Academic</button>

<label>Education</label>
<textarea id="education">Bachelor of Technology in Computer Science</textarea>

<label>Experience</label>
<textarea id="experience">Fresher / Internship experience</textarea>

<label>Technical Skills</label>
<input id="skills" value="HTML, CSS, JavaScript, React, Node.js">

<label>Projects</label>
<textarea id="projects">Resume Builder, E-commerce Website</textarea>

<label>Habits / Strengths</label>
<textarea id="habits">Quick learner, disciplined, team player</textarea>

<label>Languages Known</label>
<input id="Languages" value="Hindi, English,Telugu,">

<label>Declaration</label>
<textarea id="declaration">
I hereby declare that the information furnished above is, to the best of my knowledge, true and correct.
</textarea>

<label>Place</label>
<input id="place" value="Hyderabad">

<label>Date</label>
<input id="date" type="date">

<label>Signature</label>
<input id="signature" value="manikhanta">

<div style="margin-top:15px;">
    <button class="preview-btn" onclick="previewCV()">üëÅ Preview</button>
    <button class="download-btn" onclick="payAndDownload()">üí≥ PAY_&_DOWNLOAD_YOUR_RESUME_PDF</button>
</div>
</div>

<!-- Razorpay script -->
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<!-- jsPDF script -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
function addAcademic(){
    const d=document.createElement("div");
    d.className="academicRow";
    d.style.display="flex";
    d.style.gap="5px";
    d.innerHTML=`
    <input placeholder="Course">
    <input placeholder="Institute">
    <input placeholder="Year">
    <input placeholder="GPA">
    <button class="remove-btn" onclick="removeAcademic(this)">‚úñ</button>`;
    academicsContainer.appendChild(d);
}

function removeAcademic(btn){btn.parentElement.remove();}

// Preview CV in new window
function previewCV(){
    const f = photo.files[0];
    if(f){
        const r = new FileReader();
        r.onload = e => openPreview(e.target.result);
        r.readAsDataURL(f);
    } else openPreview("");
}

// Open preview window
function openPreview(photo){
    const w = window.open("", "_blank", "width=900,height=1200");
    w.document.write(`
<!DOCTYPE html>
<html>
<head>
<title>Preview</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body{margin:0;font-family:Poppins;background:#eee;}
.page{min-height:100vh;background:#fff;margin:20px;padding:30px;border:6px solid;border-image:linear-gradient(45deg,#ff4081,#7c4dff,#00e5ff,#4caf50) 1;}
.header{display:flex;gap:20px;align-items:center;}
img{width:120px;height:120px;border-radius:50%;}
.header h1{margin:0;color:#4caf50;}
h2{color:#4caf50;margin-bottom:5px;margin-top:25px;}
p{margin:4px 0;}
table{width:100%;border-collapse:collapse;margin-top:10px;}
th,td{border:1px solid #aaa;padding:8px;text-align:center;}
span{display:inline-block;background:#ff4081;color:#fff;padding:6px 14px;border-radius:30px;margin:4px;}
.close-bar{position:fixed;bottom:0;left:0;width:100%;background:#222;text-align:center;padding:12px;}
.close-bar button{background:#f44336;color:#fff;border:none;border-radius:30px;padding:10px 28px;font-weight:600;cursor:pointer;}
</style>
</head>
<body>

<div class="page">
<div class="header">
${photo?`<img src="${photo}">`:""}
<div>
<h1>${fullName.value}</h1>
<p><b>Father:</b> ${fatherName.value} | <b>Mother:</b> ${motherName.value}</p>
<p><b>DOB:</b> ${dob.value}</p>
<p>${email.value} | ${phone.value}</p>
<p>${address.value}</p>
</div>
</div>

<h2>Career Objective</h2><p>${objective.value}</p>
<h2>Professional Summary</h2><p>${summary.value}</p>

<h2>Academics</h2>
<table>
<tr><th>Course</th><th>Institute</th><th>Year</th><th>GPA</th></tr>
${[...document.querySelectorAll(".academicRow")].map(r=>{
    let i = r.querySelectorAll("input");
    return `<tr><td>${i[0].value}</td><td>${i[1].value}</td><td>${i[2].value}</td><td>${i[3].value}</td></tr>`;
}).join("")}
</table>

<h2>Education</h2><p>${education.value}</p>
<h2>Experience</h2><p>${experience.value}</p>

<h2>Technical Skills</h2>
${skills.value.split(",").map(s=>`<span>${s.trim()}</span>`).join("")}

<h2>Projects</h2><p>${projects.value}</p>
<h2>Habits / Strengths</h2><p>${habits.value}</p>
<h2>Languages Known</h2><p>${Languages.value}</p>

<h2>Declaration</h2><p>${declaration.value}</p>

<p><b>Place:</b> ${place.value}</p>
<p><b>Date:</b> ${date.value}</p>
<p><b>Signature:</b> ${signature.value}</p>
</div>

<div class="close-bar">
<button onclick="window.close()">‚ùå Close Preview</button>
</div>

</body>
</html>
`);
}

// Razorpay + PDF download
async function payAndDownload() {

  const options = {
    key: "rzp_live_S5ex0BvHGJcmo6", // Key ID only
    payment_link: "https://rzp.io/rzp/SatLieJ", // FIXED PAYMENT LINK (‚Çπ locked)

    handler: async function (response) {
      // ‚ö†Ô∏è Payment is ALREADY CAPTURED by Razorpay
      alert("Payment Successful ‚úÖ\nPayment ID: " + response.razorpay_payment_id);

      // Allow download
      await generatePDF();
    },

    prefill: {
      name: fullName.value,
      email: email.value,
      contact: phone.value
    },

    theme: {
      color: "#2196f3"
    }
  };

  const rzp = new Razorpay(options);
  rzp.open();
}
// Generate PDF using jsPDF
async function generatePDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF("p", "pt", "a4");

    const pageWidth = doc.internal.pageSize.getWidth();
    const pageHeight = doc.internal.pageSize.getHeight();
    const margin = 45;
    let y = 75;

    /* ========= COLOR THEME ========= */
    const COLORS = {
        black: [0, 0, 0],
        text: [40, 40, 40],
        gray: [90, 90, 90],

        purple: [106, 17, 203],
        blue: [37, 117, 252],
        pink: [233, 30, 99],
        green: [0, 150, 136],
        orange: [255, 152, 0],

        panelBg: [248, 250, 255],
        lightGreen: [224, 242, 241],
        mint: [240, 255, 250]
    };

    /* ========= THICK 4-SIDE BORDER ========= */
    function drawBorder() {
        doc.setDrawColor(...COLORS.black);
        doc.setLineWidth(4);
        doc.rect(20, 20, pageWidth - 40, pageHeight - 40);
    }

    function addNewPage() {
        doc.addPage();
        drawBorder();
        y = 75;
    }

    drawBorder();

    /* ========= GRADIENT HEADER ========= */
    const headerHeight = 95;
    for (let i = 0; i < headerHeight; i++) {
        const r = COLORS.purple[0] + (COLORS.blue[0] - COLORS.purple[0]) * (i / headerHeight);
        const g = COLORS.purple[1] + (COLORS.blue[1] - COLORS.purple[1]) * (i / headerHeight);
        const b = COLORS.purple[2] + (COLORS.blue[2] - COLORS.purple[2]) * (i / headerHeight);
        doc.setDrawColor(r, g, b);
        doc.line(20, 20 + i, pageWidth - 20, 20 + i);
    }

    /* ========= PHOTO (HIGH DP) ========= */
    const photo = document.getElementById("photo");
    if (photo.files[0]) {
        const reader = new FileReader();
        await new Promise(resolve => {
            reader.onload = e => {
                doc.addImage(
                    e.target.result,
                    "JPEG",
                    pageWidth - 135,
                    30,
                    85,
                    85,
                    undefined,
                    "FAST"
                );
                resolve();
            };
            reader.readAsDataURL(photo.files[0]);
        });
    }

    /* ========= NAME ========= */
    doc.setFont("helvetica", "bold");
    doc.setFontSize(26);
    doc.setTextColor(255, 255, 255);
    doc.text(fullName.value, margin, 58);

    doc.setFontSize(11);
    doc.setFont("helvetica", "normal");
    doc.text(
        `Father: ${fatherName.value} | Mother: ${motherName.value}`,
        margin, 75
    );

    y = 140;
    doc.setTextColor(...COLORS.text);

    /* ========= BASIC INFO PANEL ========= */
    doc.setFillColor(...COLORS.panelBg);
    doc.roundedRect(
        margin - 10,
        y - 25,
        pageWidth - margin * 2 + 20,
        80,
        10,
        10,
        "F"
    );

    doc.text(`DOB: ${dob.value}`, margin, y);
    y += 16;
    doc.text(`Email: ${email.value} | Phone: ${phone.value}`, margin, y);
    y += 16;
    doc.text(`Address: ${address.value}`, margin, y);
    y += 40;

    /* ========= SECTION FUNCTIONS ========= */
    function section(title, color) {
        if (y > pageHeight - 120) addNewPage();
        doc.setFont("helvetica", "bold");
        doc.setFontSize(15);
        doc.setTextColor(...color);
        doc.text(title, margin, y);
        y += 6;
        doc.setLineWidth(2.5);
        doc.line(margin, y, pageWidth - margin, y);
        y += 18;
        doc.setFont("helvetica", "normal");
        doc.setFontSize(11.5);
        doc.setTextColor(...COLORS.gray);
    }

    function paragraph(text) {
        const lines = doc.splitTextToSize(text, pageWidth - margin * 2);
        lines.forEach(line => {
            if (y > pageHeight - margin) addNewPage();
            doc.text(line, margin, y);
            y += 14;
        });
        y += 10;
    }

    /* ========= CONTENT ========= */
    section("Career Objective", COLORS.pink);
    paragraph(objective.value);

    section("Professional Summary", COLORS.blue);
    paragraph(summary.value);

    /* ========= ACADEMIC TABLE ========= */
    section("Academic Qualifications", COLORS.green);

    doc.autoTable({
        startY: y,
        head: [[
            "COURSE / DEGREE",
            "INSTITUTE / UNIVERSITY",
            "YEAR",
            "CGPA / %"
        ]],
        body: [...document.querySelectorAll(".academicRow")].map(row => {
            const i = row.querySelectorAll("input");
            return [i[0].value, i[1].value, i[2].value, i[3].value];
        }),
        theme: "grid",
        styles: {
            fontSize: 12,
            textColor: COLORS.black,
            lineColor: COLORS.black,
            lineWidth: 1.6,
            cellPadding: 6
        },
        headStyles: {
            fillColor: COLORS.green,
            textColor: [255, 255, 255],
            fontStyle: "bold",
            halign: "center",
            lineWidth: 2
        },
        bodyStyles: {
            fillColor: COLORS.mint
        },
        alternateRowStyles: {
            fillColor: COLORS.lightGreen
        },
        columnStyles: {
            2: { halign: "center" },
            3: { halign: "center" }
        },
        margin: { left: margin, right: margin },
        didDrawPage: () => drawBorder()
    });

    y = doc.lastAutoTable.finalY + 28;

    section("Education", COLORS.orange);
    paragraph(education.value);

    section("Experience", COLORS.green);
    paragraph(experience.value);

    section("Technical Skills", COLORS.orange);
    skills.value.split(",").forEach(skill => {
        if (y > pageHeight - margin) addNewPage();
        doc.text("‚Ä¢ " + skill.trim(), margin, y);
        y += 14;
    });
    y += 12;

    section("Projects", COLORS.blue);
    paragraph(projects.value);

    section("Habits / Strengths", COLORS.pink);
    paragraph(habits.value);

    section("Languages Known", COLORS.green);
    paragraph(Languages.value);

    section("Declaration", COLORS.purple);
    paragraph(declaration.value);

    /* ========= FOOTER ========= */
    if (y > pageHeight - 90) addNewPage();
    doc.setFont("helvetica", "bold");
    doc.setTextColor(...COLORS.text);
    doc.text(`Place: ${place.value}`, margin, y);
    y += 16;
    doc.text(`Date: ${date.value}`, margin, y);
    y += 16;
    doc.text(`Signature: ${signature.value}`, margin, y);

    /* ========= SAVE ========= */
    doc.save(`${fullName.value}_ATS_Modern_Resume.pdf`);
}


</script>

<!-- jsPDF AutoTable plugin -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

</body>
</html>
