<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MANIK_A_RNIKA â€“ CV Builder</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body{font-family:'Poppins',sans-serif;background:#f6fef9;margin:0}
.container{
    max-width:900px;margin:30px auto;padding:30px;
    background:#fff;border-radius:15px;
    box-shadow:0 10px 25px rgba(0,0,0,0.1);
}
h1{text-align:center;color:#2ecc71;margin-bottom:25px;}
label{font-weight:600;margin-top:10px;display:block}
input,textarea{
    width:100%;padding:10px;border-radius:8px;
    border:2px solid #ddd;margin-bottom:12px;
}
input:focus,textarea:focus{
    border-color:#2ecc71;
    box-shadow:0 0 6px rgba(46,204,113,.4);
    outline:none;
}
button{
    background:#ff5fa2;color:#fff;
    padding:12px 25px;border:none;
    border-radius:25px;cursor:pointer;margin-right:10px;
}
button:hover{background:#2ecc71}

/* ===== MODAL ===== */
#previewModal{
    display:none;position:fixed;z-index:1000;
    left:0;top:0;width:100%;height:100%;
    background:rgba(0,0,0,0.6);
}
.modal-content{
    background:#fff;margin:4% auto;padding:20px;
    border-radius:15px;width:90%;max-width:850px;
    position:relative;
}
.close-btn{
    position:absolute;right:25px;top:15px;
    font-size:26px;font-weight:bold;cursor:pointer;
}

/* ===== PDF ===== */
#pdfContent{
    padding:20px;border-radius:12px;
    border:10px solid;
    border-image:linear-gradient(45deg,#2ecc71,#ff5fa2) 1;
}
.pdf-header{
    display:flex;align-items:center;
    background:#2ecc71;color:#fff;
    padding:20px;border-radius:12px;
}
.pdf-header img{
    width:100px;height:100px;border-radius:50%;
    border:4px solid #fff;margin-right:20px;
    object-fit:cover;
}
.section{margin-top:15px}
.section h2{
    background:#ff5fa2;color:#fff;
    padding:6px 12px;border-radius:20px;
    font-size:1.05rem;
}
.skills span{
    display:inline-block;background:#2ecc71;color:#fff;
    padding:6px 14px;border-radius:20px;
    margin:5px;font-size:.9rem;
}
.modal-buttons{text-align:right;margin-top:15px}
</style>
</head>

<body>

<div class="container">
<h1>CV Builder</h1>

<label>Passport Photo</label>
<input type="file" id="photo" accept="image/*">

<label>Full Name</label>
<input id="fullName">

<label>Email</label>
<input id="email">

<label>Phone</label>
<input id="phone">

<label>Address</label>
<textarea id="address"></textarea>

<label>Career Objective</label>
<textarea id="objective"></textarea>

<label>Professional Summary</label>
<textarea id="summary"></textarea>

<label>Academic Details (with %)</label>
<textarea id="academics"></textarea>

<label>Experience</label>
<textarea id="experience"></textarea>

<label>Technical Skills (comma separated)</label>
<input id="techSkills">

<label>Projects</label>
<textarea id="projects"></textarea>

<label>Habits / Strengths</label>
<textarea id="habits"></textarea>

<label>Declaration</label>
<textarea id="declaration"></textarea>

<button onclick="openPreview()">Preview CV</button>
</div>

<!-- ===== PREVIEW MODAL ===== -->
<div id="previewModal">
<div class="modal-content">
<span class="close-btn" onclick="closePreview()">&times;</span>

<div id="pdfContent">
<div class="pdf-header">
<img id="pdfPhoto">
<div>
<h1 id="pdfName"></h1>
<p id="pdfContact"></p>
</div>
</div>

<div class="section"><h2>Career Objective</h2><p id="pdfObjective"></p></div>
<div class="section"><h2>Professional Summary</h2><p id="pdfSummary"></p></div>
<div class="section"><h2>Academic Details</h2><p id="pdfAcademics"></p></div>
<div class="section"><h2>Experience</h2><p id="pdfExperience"></p></div>

<div class="section">
<h2>Technical Skills</h2>
<div class="skills" id="pdfTechSkills"></div>
</div>

<div class="section"><h2>Projects</h2><p id="pdfProjects"></p></div>
<div class="section"><h2>Habits / Strengths</h2><p id="pdfHabits"></p></div>
<div class="section"><h2>Declaration</h2><p id="pdfDeclaration"></p></div>
</div>

<div class="modal-buttons">
<button onclick="downloadPDF()">Download PDF</button>
<button onclick="printPDF()">Print PDF</button>
<button onclick="closePreview()">Close</button>
</div>
</div>
</div>

<!-- ===== JS ===== -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<script>
function updatePreview(){
    pdfName.innerText = fullName.value || "Your Name";
    pdfContact.innerText = `${email.value} | ${phone.value} | ${address.value}`;
    pdfObjective.innerText = objective.value;
    pdfSummary.innerText = summary.value;
    pdfAcademics.innerText = academics.value;
    pdfExperience.innerText = experience.value;
    pdfProjects.innerText = projects.value;
    pdfHabits.innerText = habits.value;
    pdfDeclaration.innerText = declaration.value;

    pdfTechSkills.innerHTML="";
    techSkills.value.split(",").forEach(s=>{
        if(s.trim()){
            let span=document.createElement("span");
            span.innerText=s.trim();
            pdfTechSkills.appendChild(span);
        }
    });

    if(photo.files[0]){
        let r=new FileReader();
        r.onload=()=>pdfPhoto.src=r.result;
        r.readAsDataURL(photo.files[0]);
    }
}

function openPreview(){
    updatePreview();
    previewModal.style.display="block";
}
function closePreview(){
    previewModal.style.display="none";
}

function downloadPDF(){
    updatePreview();
    html2pdf().set({
        margin:0.4,
        filename:(fullName.value || "Resume")+".pdf",
        image:{type:'jpeg',quality:0.98},
        html2canvas:{scale:2},
        jsPDF:{unit:'in',format:'a4',orientation:'portrait'}
    }).from(pdfContent).save();
}

function printPDF(){
    updatePreview();
    html2pdf().from(pdfContent).toPdf().get('pdf').then(pdf=>{
        let url=pdf.output('bloburl');
        let iframe=document.createElement('iframe');
        iframe.style.display='none';
        iframe.src=url;
        document.body.appendChild(iframe);
        iframe.contentWindow.print();
    });
}

window.onclick=e=>{
    if(e.target===previewModal) closePreview();
}
</script>

</body>
</html>
